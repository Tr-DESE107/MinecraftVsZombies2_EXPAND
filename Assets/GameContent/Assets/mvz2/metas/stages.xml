<stages>
    <stage id="debug" name="测试关卡" type="special">
        <camera transition="instant"/>
        <conveyor>
            <entry id="mvz2:lily_pad" count="16"/>
            <entry id="mvz2:drivenser" count="30"/>
            <entry id="mvz2:gravity_pad" count="3"/>
            <entry id="mvz2:vortex_hopper" count="3"/>
            <entry id="mvz2:pistenser" count="12"/>
            <entry id="mvz2:totenser" count="12"/>
            <entry id="mvz2:dream_crystal" count="6"/>
            <entry id="mvz2:dream_silk" count="2"/>
        </conveyor>
    </stage>
    <stage id="tutorial" name="教程关" type="special">
        <camera transition="to_lawn"/>
    </stage>
    <stage id="prologue" name="序章">
        <talks>
            <talk type="start" value="mvz2:tutorial" />
        </talks>
        <clear pickupModel="mvz2:entity.map_pickup" note="mvz2:prologue"/>
        <spawns flags="1">
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
        </spawns>
    </stage>

    <!-- Halloween -->
    <stage id="halloween_1" name="万圣夜" dayNumber="1" unlock="mvz2:level.prologue">
        <talks>
            <talk type="start" value="mvz2:halloween_1"/>
            <talk type="end" value="mvz2:halloween_1_over"/>
            <talk type="map" value="mvz2:halloween_1_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:small_dispenser"/>
        <spawns flags="1" firstWaveTime="1800">
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
        </spawns>
    </stage>
    <stage id="starshard_tutorial" name="教程关" type="special">
        <camera transition="to_lawn"/>
    </stage>
    <stage id="halloween_2" name="万圣夜" dayNumber="2" unlock="mvz2:level.halloween_1">
        <talks>
            <talk type="start" value="mvz2:starshard_tutorial">
                <repeat>
                    <condition requiredNot="mvz2:starshard"/>
                </repeat>
            </talk>
            <talk type="end" value="mvz2:halloween_2_over"/>
            <talk type="map" value="mvz2:halloween_2_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:moonlight_sensor"/>
        <spawns flags="1" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:skeleton"/>
        </spawns>
        <properties>
            <integer name="statueCount" value="3" />
        </properties>
    </stage>
    <stage id="halloween_3" name="万圣夜" dayNumber="3" unlock="mvz2:level.halloween_2">
        <talks>
            <talk type="start" value="mvz2:halloween_3"/>
            <talk type="end" value="mvz2:halloween_3_over"/>
            <talk type="map" value="mvz2:halloween_3_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:glowstone"/>
        <spawns flags="2" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:skeleton"/>
        </spawns>
        <properties>
            <integer name="statueCount" value="4" />
        </properties>
    </stage>
    <stage id="halloween_4" name="万圣夜" dayNumber="4" unlock="mvz2:level.halloween_3">
        <talks>
            <talk type="start" value="mvz2:halloween_4"/>
            <talk type="end" value="mvz2:halloween_4_over"/>
            <talk type="map" value="mvz2:halloween_4_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:punchton"/>
        <spawns flags="2" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:skeleton"/>
            <spawn id="mvz2:ghost"/>
        </spawns>
        <properties>
            <integer name="statueCount" value="5" />
        </properties>
    </stage>
    <stage id="halloween_5" name="万圣夜" dayNumber="5" unlock="mvz2:level.halloween_4" >
        <talks>
            <talk type="start" value="mvz2:halloween_5"/>
            <talk type="end" value="mvz2:halloween_5_over"/>
            <talk type="map" value="mvz2:halloween_5_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.almanac_pickup" />
        <spawns flags="2" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:skeleton"/>
            <spawn id="mvz2:ghost"/>
        </spawns>
        <properties>
            <integer name="statueCount" value="6" />
        </properties>
    </stage>
    <stage id="halloween_6" name="万圣夜" dayNumber="6" needBlueprints="false" type="minigame" unlock="mvz2:level.halloween_5" music="mvz2:minigame" >
        <model preset="cloudy" />
        <talks>
            <talk type="start" value="mvz2:halloween_6"/>
            <talk type="end" value="mvz2:halloween_6_over"/>
            <talk type="map" value="mvz2:halloween_6_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:tnt"/>
        <camera position="lawn" transition="instant"/>
        <spawns flags="2" firstWaveTime="30" pointsMultiplier="2" pointsAddition="1" >
            <spawn id="mvz2:ghost"/>
        </spawns>
    </stage>
    <stage id="halloween_7" name="万圣夜" dayNumber="7" unlock="mvz2:level.halloween_6" >
        <talks>
            <talk type="start" value="mvz2:trigger_tutorial">
                <repeat>
                    <condition requiredNot="mvz2:trigger"/>
                </repeat>
            </talk>
            <talk type="end" value="mvz2:halloween_7_over"/>
            <talk type="map" value="mvz2:halloween_7_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:soul_furnace"/>
        <spawns flags="2" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:skeleton"/>
            <spawn id="mvz2:ghost"/>
            <spawn id="mvz2:mummy"/>
        </spawns>
        <properties>
            <integer name="statueCount" value="7" />
        </properties>
    </stage>
    <stage id="trigger_tutorial" name="教程关" type="special">
        <camera transition="to_lawn"/>
    </stage>
    <stage id="halloween_8" name="万圣夜" dayNumber="8" unlock="mvz2:level.halloween_7" >
        <talks>
            <talk type="start" value="mvz2:seventh_slot">
                <repeat>
                    <condition requiredNot="mvz2:blueprint_slot.1;mvz2:level.dream_5"/>
                </repeat>
            </talk>
            <talk type="end" value="mvz2:halloween_8_over"/>
            <talk type="map" value="mvz2:halloween_8_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:silvenser"/>
        <spawns flags="2" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:skeleton"/>
            <spawn id="mvz2:ghost"/>
            <spawn id="mvz2:mummy"/>
        </spawns>
        <properties>
            <integer name="statueCount" value="8" />
        </properties>
    </stage>
    <stage id="halloween_9" name="万圣夜" dayNumber="9" unlock="mvz2:level.halloween_8" >
        <talks>
            <talk type="start" value="mvz2:halloween_9"/>
            <talk type="end" value="mvz2:halloween_9_over"/>
            <talk type="map" value="mvz2:halloween_9_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:magichest"/>
        <spawns flags="2" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:skeleton"/>
            <spawn id="mvz2:ghost"/>
            <spawn id="mvz2:mummy"/>
            <spawn id="mvz2:necromancer"/>
        </spawns>
        <properties>
            <integer name="statueCount" value="9" />
        </properties>
    </stage>
    <stage id="halloween_10" name="万圣夜" dayNumber="10" unlock="mvz2:level.halloween_9" >
        <talks>
            <talk type="start" value="mvz2:halloween_10"/>
            <talk type="end" value="mvz2:halloween_10_over"/>
            <talk type="map" value="mvz2:halloween_10_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.map_pickup" note="mvz2:halloween"/>
        <spawns flags="2" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:skeleton"/>
            <spawn id="mvz2:ghost"/>
            <spawn id="mvz2:mummy"/>
            <spawn id="mvz2:necromancer"/>
        </spawns>
        <properties>
            <integer name="statueCount" value="10" />
        </properties>
    </stage>
    <stage id="halloween_11" name="万圣夜" dayNumber="11" type="boss" needBlueprints="false" unlock="mvz2:level.halloween_10" music="mvz2:ultimate_battle" >
        <model preset="cloudy" />
        <talks>
            <talk type="start" value="mvz2:halloween_11"/>
            <talk type="end" value="mvz2:halloween_11_over"/>
            <talk type="map" value="mvz2:halloween_11_map"/>
        </talks>
        <conveyor>
            <entry id="mvz2:obsidian" count="8"/>
            <entry id="mvz2:small_dispenser" count="5"/>
            <entry id="mvz2:punchton" count="5"/>
            <entry id="mvz2:tnt" count="3"/>
            <entry id="mvz2:soul_furnace" count="10"/>
            <entry id="mvz2:silvenser" count="8"/>
            <entry id="mvz2:magichest" count="4"/>
        </conveyor>
        <clear pickupModel="mvz2:entity.dream_key"/>
        <spawns flags="2" firstWaveTime="30" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:skeleton"/>
            <spawn id="mvz2:ghost"/>
            <spawn id="mvz2:mummy"/>
            <spawn id="mvz2:necromancer"/>
        </spawns>
        <properties>
            <integer name="statueCount" value="10" />
        </properties>
    </stage>
    <stage id="halloween_endless" name="万圣夜无尽" type="endless" unlock="mvz2:level.halloween_11" >
        <clear pickupModel="mvz2:entity.money_chest"/>
        <spawns flags="2" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
        </spawns>
        <properties>
            <integer name="statueCount" value="2" />
        </properties>
    </stage>

    <!-- Dream -->
    <stage id="dream_1" name="梦境世界" dayNumber="1" unlock="mvz2:entered_dream">
        <talks>
            <talk type="start" value="mvz2:dream_1"/>
            <talk type="end" value="mvz2:dream_1_over"/>
            <talk type="map" value="mvz2:dream_1_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:lily_pad"/>
        <spawns flags="1">
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
        </spawns>
    </stage>
    <stage id="dream_2" name="梦境世界" dayNumber="2" unlock="mvz2:level.dream_1">
        <talks>
            <talk type="start" value="mvz2:dream_2"/>
            <talk type="end" value="mvz2:dream_2_over"/>
            <talk type="map" value="mvz2:dream_2_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:drivenser"/>
        <spawns flags="2">
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:spider"/>
        </spawns>
    </stage>
    <stage id="dream_3" name="梦境世界" dayNumber="3" unlock="mvz2:level.dream_2">
        <talks>
            <talk type="start" value="mvz2:dream_3"/>
            <talk type="end" value="mvz2:dream_3_over"/>
            <talk type="map" value="mvz2:dream_3_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:gravity_pad"/>
        <spawns flags="2">
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:spider"/>
        </spawns>
    </stage>
    <stage id="dream_4" name="梦境世界" dayNumber="4" unlock="mvz2:level.dream_3">
        <talks>
            <talk type="start" value="mvz2:dream_4"/>
            <talk type="end" value="mvz2:dream_4_over"/>
            <talk type="map" value="mvz2:dream_4_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:vortex_hopper"/>
        <spawns flags="2">
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:spider"/>
            <spawn id="mvz2:cave_spider"/>
        </spawns>
    </stage>
    <stage id="dream_5" name="梦境世界" dayNumber="5" unlock="mvz2:level.dream_4">
        <talks>
            <talk type="start" value="mvz2:dream_5"/>
            <talk type="end" value="mvz2:dream_5_over"/>
            <talk type="map" value="mvz2:dream_5_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.ender_chest"/>
        <spawns flags="2">
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:spider"/>
            <spawn id="mvz2:cave_spider"/>
        </spawns>
    </stage>
    <stage id="dream_6" name="梦境世界" dayNumber="6" needBlueprints="false" type="minigame" unlock="mvz2:level.dream_5" music="mvz2:minigame">
        <talks>
            <talk type="start" value="mvz2:dream_6"/>
            <talk type="end" value="mvz2:dream_6_over"/>
            <talk type="map" value="mvz2:dream_6_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:pistenser"/>
        <camera position="lawn" transition="instant"/>
        <spawns flags="2" firstWaveTime="30">
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
        </spawns>
        <properties>
            <bool name="ignoreHugeWaveEvent" value="true"/>
            <bool name="noProduction" value="true"/>
        </properties>
    </stage>
    <stage id="dream_7" name="梦境世界" dayNumber="7" unlock="mvz2:level.dream_6" >
        <talks>
            <talk type="start" value="mvz2:dream_7"/>
            <talk type="end" value="mvz2:dream_7_over"/>
            <talk type="map" value="mvz2:dream_7_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:totenser"/>
        <spawns flags="2" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:spider"/>
            <spawn id="mvz2:cave_spider"/>
            <spawn id="mvz2:ghast"/>
        </spawns>
    </stage>
    <stage id="dream_8" name="梦境世界" dayNumber="8" unlock="mvz2:level.dream_7" >
        <talks>
            <talk type="start" value="mvz2:dream_8"/>
            <talk type="end" value="mvz2:dream_8_over"/>
            <talk type="map" value="mvz2:dream_8_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:dream_crystal"/>
        <spawns flags="3" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:spider"/>
            <spawn id="mvz2:cave_spider"/>
            <spawn id="mvz2:ghast"/>
        </spawns>
    </stage>
    <stage id="dream_9" name="梦境世界" dayNumber="9" unlock="mvz2:level.dream_8" >
        <talks>
            <talk type="start" value="mvz2:dream_9"/>
            <talk type="end" value="mvz2:dream_9_over"/>
            <talk type="map" value="mvz2:dream_9_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:dream_silk"/>
        <spawns flags="2" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:spider"/>
            <spawn id="mvz2:cave_spider"/>
            <spawn id="mvz2:ghast"/>
            <spawn id="mvz2:mother_terror"/>
        </spawns>
    </stage>
    <stage id="dream_10" name="梦境世界" dayNumber="10" unlock="mvz2:level.dream_9" >
        <talks>
            <talk type="start" value="mvz2:dream_10"/>
            <talk type="end" value="mvz2:dream_10_over"/>
            <talk type="map" value="mvz2:dream_10_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.map_pickup" note="mvz2:dream"/>
        <spawns flags="3" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:spider"/>
            <spawn id="mvz2:cave_spider"/>
            <spawn id="mvz2:ghast"/>
            <spawn id="mvz2:mother_terror"/>
        </spawns>
    </stage>
    <stage id="dream_11" name="梦境世界" dayNumber="11" type="boss" needBlueprints="false" unlock="mvz2:level.dream_10" music="mvz2:nightmare_final" >
        <talks>
            <talk type="start" value="mvz2:dream_11"/>
            <talk type="end" value="mvz2:dream_11_over"/>
            <talk type="map" value="mvz2:dream_11_map"/>
        </talks>
        <conveyor>
            <entry id="mvz2:lily_pad" count="16"/>
            <entry id="mvz2:drivenser" count="30"/>
            <entry id="mvz2:gravity_pad" count="3"/>
            <entry id="mvz2:vortex_hopper" count="3"/>
            <entry id="mvz2:pistenser" count="12"/>
            <entry id="mvz2:totenser" count="12"/>
            <entry id="mvz2:dream_crystal" count="6"/>
            <entry id="mvz2:dream_silk" count="2"/>
        </conveyor>
        <clear pickupModel="mvz2:entity.money_chest"/>
        <spawns flags="2" firstWaveTime="30" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
            <spawn id="mvz2:iron_helmetted_zombie"/>
            <spawn id="mvz2:spider"/>
            <spawn id="mvz2:cave_spider"/>
            <spawn id="mvz2:ghast"/>
            <spawn id="mvz2:mother_terror"/>
        </spawns>
        <properties>
            <bool name="noProduction" value="true"/>
        </properties>
    </stage>
    <stage id="dream_endless" name="梦境世界无尽" type="endless" unlock="mvz2:level.dream_11" >
        <clear pickupModel="mvz2:entity.money_chest"/>
        <spawns flags="2" >
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
        </spawns>
    </stage>

    <!-- Castle -->
    <stage id="castle_1" name="辉针城" dayNumber="1" unlock="mvz2:entered_castle">
        <talks>
            <talk type="start" value="mvz2:castle_1"/>
            <talk type="end" value="mvz2:castle_1_over"/>
            <talk type="map" value="mvz2:castle_1_map"/>
        </talks>
        <clear pickupModel="mvz2:entity.blueprint_pickup" blueprint="mvz2:wooden_dropper"/>
        <spawns flags="1">
            <spawn id="mvz2:zombie"/>
            <spawn id="mvz2:leather_capped_zombie"/>
        </spawns>
    </stage>
</stages>