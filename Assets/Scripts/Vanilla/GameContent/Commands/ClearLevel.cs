#nullable enable // autogenerated

using MVZ2.GameContent.Pickups;
using MVZ2.Vanilla.Level;
using MVZ2Logic;
using MVZ2Logic.IZombie;
using UnityEngine;

namespace MVZ2.GameContent.Commands
{
    [CommandDefinition(VanillaCommandNames.clearLevel)]
    public class ClearLevel : CommandDefinition
    {
        public ClearLevel(string nsp, string name) : base(nsp, name)
        {
        }
        public override void Invoke(string[] parameters)
        {
            var level = Global.Level.GetLevel();
            if (level == null)
                return;

            float x = level.GetEntityColumnX(Mathf.FloorToInt(level.GetMaxColumnCount() * 0.5f));
            float z = level.GetEntityLaneZ(Mathf.FloorToInt(level.GetMaxLaneCount() * 0.5f));
            float y = level.GetGroundY(x, z);

            ClearPickup.Produce(level, new Vector3(x, y, z));
        }
    }
}