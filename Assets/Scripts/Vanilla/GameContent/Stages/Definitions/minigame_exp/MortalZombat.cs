#nullable enable // autogenerated

using System.Linq;
using MVZ2.GameContent.Contraptions;
using MVZ2.GameContent.Seeds;
using MVZ2.Vanilla.Level;
using PVZEngine;
using PVZEngine.Definitions;
using PVZEngine.Level;
using UnityEngine;
using MVZ2.GameContent.Artifacts;
using MVZ2Logic.Level;


namespace MVZ2.GameContent.Stages
{
    [StageDefinition(VanillaStageNames.MortalZombat)]
    public partial class MortalZombat : StageDefinition
    {
        public MortalZombat(string nsp, string name) : base(nsp, name)
        {

            AddBehaviour(new WaveStageBehaviour(this));
            AddBehaviour(new FinalWaveClearBehaviour(this));
            AddBehaviour(new GemStageBehaviour(this));
            AddBehaviour(new StarshardStageBehaviour(this));
        }
        //public override void OnSetup(LevelEngine level)
        //{
        //    base.OnSetup(level);

        //    var grid = level.GetGrid(4, 2);
        //    var x = level.GetEntityColumnX(4);
        //    var z = level.GetEntityLaneZ(2);
        //    var y = level.GetGroundY(x, z);
        //    var position = new Vector3(x, y, z);
        //    level.Spawn(VanillaContraptionID.dispenser, position, null);
        //}
        //public override void OnSetup(LevelEngine level)
        //{
        //    base.OnSetup(level);
        //}

        public override void OnStart(LevelEngine level)
        {
            base.OnStart(level);

            level.SetSeedSlotCount(9);
            level.FillSeedPacks(new NamespaceID[]
            {
                VanillaBlueprintID.FromEntity(VanillaContraptionID.devourer),
                VanillaBlueprintID.FromEntity(VanillaContraptionID.magichest),
                VanillaBlueprintID.FromEntity(VanillaContraptionID.dreamSilk),
                VanillaBlueprintID.FromEntity(VanillaContraptionID.giantBowl),
                VanillaBlueprintID.FromEntity(VanillaContraptionID.desirePot),
                VanillaBlueprintID.FromEntity(VanillaContraptionID.jeweledPagoda),
                VanillaBlueprintID.FromEntity(VanillaContraptionID.RedStoneOre),
                VanillaBlueprintID.FromEntity(VanillaContraptionID.lightningOrb),
                VanillaBlueprintID.FromEntity(VanillaContraptionID.glowstone),
            });
            //level.SetPickaxeActive(false);
            level.SetEnergy(4000);
            level.SetArtifactSlotCount(2);
            level.SetStarshardSlotCount(5);
            level.ReplaceArtifacts(new NamespaceID[]
            {
                VanillaArtifactID.sorcerersScroll,
                VanillaArtifactID.pagodaBranch,
            });

        }

    }
}
