#nullable enable // autogenerated

namespace PVZEngine.Grids
{
    public partial class LawnGrid
    {
        #region 序列化
        public SerializableGrid ToSerializable()
        {
            var seri = new SerializableGrid()
            {
                lane = Lane,
                column = Column,
                definitionID = Definition.GetID(),
            };
            WritePropertiesToSerializable(seri);
            WriteBuffsToSerializable(seri);
            WriteLayersToSerializable(seri);
            return seri;
        }
        public void InitFromSerializable(SerializableGrid seri)
        {
            LoadPropertiesFromSerializable(seri);
            LoadBuffsFromSerializable(seri);
        }
        public void LoadFromSerializable(SerializableGrid seri)
        {
            LoadLayersFromSerializable(seri);
            // 光环
            LoadAurasFromSerializable(seri);
            // 加载后更新
            properties.UpdateAllModifiedProperties(false);
        }
        private void LoadAurasFromSerializable(SerializableGrid seri)
        {
            if (seri.buffs != null)
                buffs.LoadAuras(seri.buffs, Level);
        }
        #endregion
    }
}