#nullable enable // autogenerated

using System.Xml;
using MVZ2Logic;
using PVZEngine;

namespace MVZ2.Metas
{
    public class AudioSample
    {
        public NamespaceID path;
        public float weight;

        public AudioSample(NamespaceID path, float weight)
        {
            this.path = path;
            this.weight = weight;
        }

        public static AudioSample? FromXmlNode(XmlNode node, string defaultNsp)
        {
            if (!NamespaceID.TryParse(node.Attributes["path"].Value, defaultNsp, out var path))
            {
                Log.LogError($"The {nameof(path)} of an {nameof(AudioSample)} is invalid.");
                return null;
            }
            float weight = 1;
            var weightAttribute = node.Attributes["weight"];
            if (weightAttribute != null)
            {
                if (ParseHelper.TryParseFloat(weightAttribute.Value, out var floatValue))
                {
                    weight = floatValue;
                }
            }
            return new AudioSample(path, weight);
        }
    }
}
