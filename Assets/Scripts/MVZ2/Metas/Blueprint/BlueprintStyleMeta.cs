#nullable enable // autogenerated

using System.Xml;
using MVZ2.IO;
using MVZ2Logic;

namespace MVZ2.Metas
{
    public class BlueprintStyleMeta
    {
        public BlueprintStyleMeta(string id)
        {
            ID = id;
        }

        public string ID { get; private set; }
        public SpriteReference? StandaloneBackground { get; private set; }
        public SpriteReference? MobileBackground { get; private set; }
        public SpriteReference? MobileFrameTop { get; private set; }
        public SpriteReference? MobileFrameBottom { get; private set; }
        public static BlueprintStyleMeta? FromXmlNode(XmlNode node, string defaultNsp)
        {
            var id = node.GetAttribute("id");
            if (string.IsNullOrEmpty(id))
            {
                Log.LogError("The ID of a BlueprintStyleMeta is invalid.");
                return null;
            }
            var standaloneNode = node["standalone"];
            var standaloneBackground = standaloneNode?.GetAttributeSpriteReference("background", defaultNsp);

            var mobileNode = node["mobile"];
            var mobileBackground = mobileNode?.GetAttributeSpriteReference("background", defaultNsp);
            var mobileFrameTop = mobileNode?.GetAttributeSpriteReference("frameTop", defaultNsp);
            var mobileFrameBottom = mobileNode?.GetAttributeSpriteReference("frameBottom", defaultNsp);
            return new BlueprintStyleMeta(id)
            {
                StandaloneBackground = standaloneBackground,
                MobileBackground = mobileBackground,
                MobileFrameTop = mobileFrameTop,
                MobileFrameBottom = mobileFrameBottom,
            };
        }
    }
}
