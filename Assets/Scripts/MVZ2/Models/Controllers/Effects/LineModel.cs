#nullable enable // autogenerated

using UnityEngine;

namespace MVZ2.Models
{
    public class LineModel : ModelComponent
    {
        public override void OnPropertySet(string name, object? value)
        {
            base.OnPropertySet(name, value);
            if (name == "ShowLine" && value is bool boolValue)
            {
                sourceTransform.gameObject.SetActive(boolValue);
            }
        }
        public override void UpdateFrame(float deltaTime)
        {
            base.UpdateFrame(deltaTime);
            if (!sourceTransform.gameObject.activeInHierarchy)
                return;
            var source = sourceTransform.position;
            var dest = Lawn2TransPosition(Model.GetProperty<Vector3>("Dest"));
            var distance = dest - source;
            if (ignoreZ)
            {
                distance.z = 0;
            }
            sourceTransform.localRotation = Quaternion.FromToRotation(Vector3.right, distance);
            sourceTransform.localScale = new Vector3(distance.magnitude, 1, 1);
        }
        [SerializeField]
        private Transform sourceTransform = null!;
        [SerializeField]
        private bool ignoreZ = false;
    }
}
