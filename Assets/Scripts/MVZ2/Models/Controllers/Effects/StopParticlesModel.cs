#nullable enable // autogenerated

using UnityEngine;

namespace MVZ2.Models
{
    public class StopParticlesModel : ModelComponent
    {
        public override void UpdateFrame(float deltaTime)
        {
            base.UpdateFrame(deltaTime);
            var stopped = Model.GetProperty<bool>("ParticleStopped");
            if (stopped && particles != null)
            {
                foreach (var particle in particles)
                {
                    if (!particle.Exists() || !particle.Particles.isPlaying)
                        continue;
                    particle.Particles.Stop(false, ParticleSystemStopBehavior.StopEmitting);
                }
            }
        }
        [SerializeField]
        private ParticlePlayer?[]? particles;
    }
}
