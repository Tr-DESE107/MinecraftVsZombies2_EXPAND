#nullable enable // autogenerated

using System;
using MVZ2.UI;
using TMPro;
using UnityEngine;
using UnityEngine.UI;

namespace MVZ2.Archives
{
    public class DetailsArchivePage : ArchivePage
    {
        public void UpdateDetails(ArchiveDetailsViewData viewData)
        {
            nameText.text = viewData.name;
            backgroundImage.sprite = viewData.background;
            segmentsText.text = viewData.segments;
            musicText.text = viewData.music;
            tagsText.text = viewData.tags;
            sectionList.updateList(viewData.sections.Length, (i, obj) =>
            {
                var section = obj.GetComponent<ArchiveDetailsSection>();
                section.UpdateSection(viewData.sections[i]);
            });
            descriptionScrollRect.verticalNormalizedPosition = 1;
        }
        private void Awake()
        {
            playButton.onClick.AddListener(() => OnPlayClick?.Invoke());
            returnButton.onClick.AddListener(() => OnReturnClick?.Invoke());
        }
        public event Action? OnReturnClick;
        public event Action? OnPlayClick;
        [SerializeField]
        private Button returnButton = null!;
        [Header("General")]
        [SerializeField]
        private TextMeshProUGUI nameText = null!;
        [SerializeField]
        private Image backgroundImage = null!;
        [SerializeField]
        private TextMeshProUGUI segmentsText = null!;
        [SerializeField]
        private TextMeshProUGUI musicText = null!;
        [SerializeField]
        private TextMeshProUGUI tagsText = null!;
        [SerializeField]
        private Button playButton = null!;
        [Header("Sections")]
        [SerializeField]
        private ScrollRect descriptionScrollRect = null!;
        [SerializeField]
        private ElementList sectionList = null!;
    }
    public struct ArchiveDetailsViewData
    {
        public string name;
        public Sprite? background;
        public string segments;
        public string music;
        public string tags;
        public ArchiveDetailsSectionViewData[] sections;
    }
}
