#nullable enable // autogenerated

using System;
using MVZ2.Models;
using MVZ2.UI;
using TMPro;
using UnityEngine;
using UnityEngine.EventSystems;

namespace MVZ2.Almanacs
{
    public class ContraptionAlmanacPage : BookAlmanacPage
    {
        public void SetEntries(ChoosingBlueprintViewData[] entries, bool commandBlockVisible, ChoosingBlueprintViewData commandBlockViewData)
        {
            blueprintDisplayer.UpdateItems(entries);
            commandBlockSlot.SetCommandBlockActive(commandBlockVisible);
            commandBlockSlot.UpdateCommandBlockItem(commandBlockViewData);
        }
        public void SetActiveEntry(ModelBuilder model, string name, string description, string cost, string recharge)
        {
            entryModel.ChangeModel(model);
            SetDescription(name, description);
            costText.text = cost;
            rechargeText.text = recharge;
        }
        protected override void Awake()
        {
            base.Awake();
            blueprintDisplayer.OnBlueprintSelect += OnEntryClickCallback;
            commandBlockSlot.OnSelect += OnCommandBlockClickCallback;
        }
        private void OnEntryClickCallback(int index, PointerEventData eventData)
        {
            OnEntryClick?.Invoke(index, eventData);
        }
        private void OnCommandBlockClickCallback(PointerEventData eventData)
        {
            OnCommandBlockClick?.Invoke(eventData);
        }
        public event Action<int, PointerEventData>? OnEntryClick;
        public event Action<PointerEventData>? OnCommandBlockClick;
        [SerializeField]
        private BlueprintDisplayer blueprintDisplayer = null!;
        [SerializeField]
        CommandBlockSlot commandBlockSlot = null!;
        [SerializeField]
        private AlmanacModel entryModel = null!;
        [SerializeField]
        private TextMeshProUGUI costText = null!;
        [SerializeField]
        private TextMeshProUGUI rechargeText = null!;
    }
}
